(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function T(){}function he(e,t){for(const n in t)e[n]=t[n];return e}function re(e){return e()}function Y(){return Object.create(null)}function L(e){e.forEach(re)}function oe(e){return typeof e=="function"}function V(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let M;function be(e,t){return M||(M=document.createElement("a")),M.href=t,e===M.href}function ye(e){return Object.keys(e).length===0}function _e(e,t,n,r){if(e){const o=ie(e,t,n,r);return e[0](o)}}function ie(e,t,n,r){return e[1]&&r?he(n.ctx.slice(),e[1](r(t))):n.ctx}function ve(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const i=[],s=Math.max(t.dirty.length,o.length);for(let a=0;a<s;a+=1)i[a]=t.dirty[a]|o[a];return i}return t.dirty|o}return t.dirty}function xe(e,t,n,r,o,i){if(o){const s=ie(t,n,r,i);e.p(s,o)}}function we(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function v(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function x(e){e.parentNode&&e.parentNode.removeChild(e)}function Be(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function se(e){return document.createTextNode(e)}function A(){return se(" ")}function Se(){return se("")}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ke(e){return Array.from(e.childNodes)}function z(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Z(e,t,n){e.classList[n?"add":"remove"](t)}let F;function D(e){F=e}function Ce(){if(!F)throw new Error("Function called outside component initialization");return F}function Ee(e){Ce().$$.on_mount.push(e)}const C=[],I=[];let E=[];const H=[],ze=Promise.resolve();let j=!1;function Ae(){j||(j=!0,ze.then(ae))}function P(e){E.push(e)}function le(e){H.push(e)}const R=new Set;let k=0;function ae(){if(k!==0)return;const e=F;do{try{for(;k<C.length;){const t=C[k];k++,D(t),De(t.$$)}}catch(t){throw C.length=0,k=0,t}for(D(null),C.length=0,k=0;I.length;)I.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];R.has(n)||(R.add(n),n())}E.length=0}while(C.length);for(;H.length;)H.pop()();j=!1,R.clear(),D(e)}function De(e){if(e.fragment!==null){e.update(),L(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}function Fe(e){const t=[],n=[];E.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),E=t}const q=new Set;let Ie;function O(e,t){e&&e.i&&(q.delete(e),e.i(t))}function U(e,t,n,r){if(e&&e.o){if(q.has(e))return;q.add(e),Ie.c.push(()=>{q.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function ce(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function ue(e){e&&e.c()}function K(e,t,n,r){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),r||P(()=>{const s=e.$$.on_mount.map(re).filter(oe);e.$$.on_destroy?e.$$.on_destroy.push(...s):L(s),e.$$.on_mount=[]}),i.forEach(P)}function G(e,t){const n=e.$$;n.fragment!==null&&(Fe(n.after_update),L(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $e(e,t){e.$$.dirty[0]===-1&&(C.push(e),Ae(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function J(e,t,n,r,o,i,s,a=[-1]){const f=F;D(e);const c=e.$$={fragment:null,ctx:[],props:i,update:T,not_equal:o,bound:Y(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Y(),dirty:a,skip_bound:!1,root:t.target||f.$$.root};s&&s(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},(p,h,...b)=>{const m=b.length?b[0]:h;return c.ctx&&o(c.ctx[p],c.ctx[p]=m)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](m),d&&$e(e,p)),h}):[],c.update(),d=!0,L(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const p=ke(t.target);c.fragment&&c.fragment.l(p),p.forEach(x)}else c.fragment&&c.fragment.c();t.intro&&O(e.$$.fragment),K(e,t.target,t.anchor,t.customElement),ae()}D(f)}class Q{$destroy(){G(this,1),this.$destroy=T}$on(t,n){if(!oe(n))return T;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!ye(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ee=['#1: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. <span class="scroll-more">Scroll for more...</span>','Select ethnic identities of <span class="blue-01">Surrey</span> and <span class="green-01">Vancouver</span> residents.','Occupied housing units in <span class="blue-01">Surrey</span> and <span class="green-01">Vancouver</span>, by building height.','How people commute to work in <span class="blue-01">Surrey</span> and <span class="green-01">Vancouver</span>.'];function Me(e){let t,n;const r=e[7].default,o=_e(r,e,e[6],null);return{c(){t=g("div"),o&&o.c()},m(i,s){w(i,t,s),o&&o.m(t,null),e[8](t),n=!0},p(i,[s]){o&&o.p&&(!n||s&64)&&xe(o,r,i,i[6],n?ve(r,i[6],s,null):we(i[6]),null)},i(i){n||(O(o,i),n=!0)},o(i){U(o,i),n=!1},d(i){i&&x(t),o&&o.d(i),e[8](null)}}}function qe(e,t,n){let{$$slots:r={},$$scope:o}=t,{root:i=null}=t,{top:s=0}=t,{bottom:a=0}=t,{increments:f=100}=t,{value:c=void 0}=t;const d=[],p=[];let h=[],b=[],m;const B=()=>{!h.length||h.forEach($)},N=()=>{let l=0,y=0;for(let S=0;S<d.length;S++)d[S]>l&&(l=d[S],y=S);l>0?n(1,c=y):n(1,c=void 0)},$=(l,y)=>{const S=X=>{X[0].isIntersecting;const ge=X[0].intersectionRatio;d[y]=ge,N()},fe=s?s*-1:0,pe=a?a*-1:0,de=`${fe}px 0px ${pe}px 0px`,me={root:i,rootMargin:de,threshold:p};b[y]&&b[y].disconnect();const W=new IntersectionObserver(S,me);W.observe(l),b[y]=W};Ee(()=>{for(let l=0;l<f+1;l++)p.push(l/f);h=m.querySelectorAll(":scope > *"),B()});function u(l){I[l?"unshift":"push"](()=>{m=l,n(0,m)})}return e.$$set=l=>{"root"in l&&n(2,i=l.root),"top"in l&&n(3,s=l.top),"bottom"in l&&n(4,a=l.bottom),"increments"in l&&n(5,f=l.increments),"value"in l&&n(1,c=l.value),"$$scope"in l&&n(6,o=l.$$scope)},e.$$.update=()=>{e.$$.dirty&24&&B()},[m,c,i,s,a,f,o,r,u]}class Le extends Q{constructor(t){super(),J(this,t,qe,Me,V,{root:2,top:3,bottom:4,increments:5,value:1})}}function te(e,t,n){const r=e.slice();return r[2]=t[n],r[4]=n,r}function ne(e){let t,n,r,o=e[2]+"",i;return{c(){t=g("li"),n=g("div"),r=g("p"),i=A(),_(n,"class","step-content svelte-1cz9r95"),_(t,"class","step svelte-1cz9r95"),Z(t,"active",e[0]===e[4])},m(s,a){w(s,t,a),v(t,n),v(n,r),r.innerHTML=o,v(t,i)},p(s,a){a&1&&Z(t,"active",s[0]===s[4])},d(s){s&&x(t)}}}function Oe(e){let t,n=ee,r=[];for(let o=0;o<n.length;o+=1)r[o]=ne(te(e,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=Se()},m(o,i){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(o,i);w(o,t,i)},p(o,i){if(i&1){n=ee;let s;for(s=0;s<n.length;s+=1){const a=te(o,n,s);r[s]?r[s].p(a,i):(r[s]=ne(a),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(o){Be(r,o),o&&x(t)}}}function Ne(e){let t,n,r;function o(s){e[1](s)}let i={$$slots:{default:[Oe]},$$scope:{ctx:e}};return e[0]!==void 0&&(i.value=e[0]),t=new Le({props:i}),I.push(()=>ce(t,"value",o)),{c(){ue(t.$$.fragment)},m(s,a){K(t,s,a),r=!0},p(s,[a]){const f={};a&33&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.value=s[0],le(()=>n=!1)),t.$set(f)},i(s){r||(O(t.$$.fragment,s),r=!0)},o(s){U(t.$$.fragment,s),r=!1},d(s){G(t,s)}}}function Re(e,t,n){let{currentStep:r}=t;function o(i){r=i,n(0,r)}return e.$$set=i=>{"currentStep"in i&&n(0,r=i.currentStep)},[r,o]}class Te extends Q{constructor(t){super(),J(this,t,Re,Ne,V,{currentStep:0})}}function He(e){let t,n,r,o,i,s,a,f,c,d,p,h,b,m,B;function N(u){e[1](u)}let $={};return e[0]!==void 0&&($.currentStep=e[0]),p=new Te({props:$}),I.push(()=>ce(p,"currentStep",N)),{c(){t=g("section"),n=g("header"),n.innerHTML="<h1>A tale of two (Metro Vancouver) cities</h1>",r=A(),o=g("div"),i=g("iframe"),a=A(),f=g("div"),f.innerHTML='<a class="flourish-credit" href="https://public.flourish.studio/visualisation/3706064/?utm_source=embed&amp;utm_campaign=visualisation/3706064" target="_top" style="text-decoration:none!important"><img alt="Made with Flourish" src="https://public.flourish.studio/resources/made_with_flourish.svg" style="width:105px!important;height:16px!important;border:none!important;margin:0!important;"/></a>',c=A(),d=g("ul"),ue(p.$$.fragment),b=A(),m=g("footer"),m.innerHTML=`<p class="source">Source:</p> 
    
    <div style="width:100%!;margin-top:4px!important;text-align:right!important;"><a class="flourish-credit" href="https://public.flourish.studio/visualisation/3706064/?utm_source=embed&amp;utm_campaign=visualisation/3706064" target="_top" style="text-decoration:none!important"><img alt="Made with Flourish" src="https://public.flourish.studio/resources/made_with_flourish.svg" style="width:105px!important;height:16px!important;border:none!important;margin:0!important;"/></a></div>`,be(i.src,s=Pe)||_(i,"src",s),_(i,"frameborder","0"),_(i,"scrolling","no"),z(i,"width","100%"),z(i,"height",je),_(i,"title","flourish-embed"),_(o,"class","chart sticky svelte-1cq5eoo"),z(f,"width","100%!"),z(f,"margin-top","4px",1),z(f,"text-align","right",1),_(t,"class","scrollyteller sticky svelte-1cq5eoo"),_(d,"class","steps svelte-1cq5eoo")},m(u,l){w(u,t,l),v(t,n),v(t,r),v(t,o),v(o,i),v(t,a),v(t,f),w(u,c,l),w(u,d,l),K(p,d,null),w(u,b,l),w(u,m,l),B=!0},p(u,[l]){const y={};!h&&l&1&&(h=!0,y.currentStep=u[0],le(()=>h=!1)),p.$set(y)},i(u){B||(O(p.$$.fragment,u),B=!0)},o(u){U(p.$$.fragment,u),B=!1},d(u){u&&x(t),u&&x(c),u&&x(d),G(p),u&&x(b),u&&x(m)}}}const je="550px",Pe="https://flo.uri.sh/story/2932705/embed";function Ve(e,t,n){let r,o;const i=function(a){o=document.querySelector("#app .chart > iframe"),o.src=o.src.replace(/#slide-.*/,"")+"#slide-"+a};function s(a){r=a,n(0,r)}return e.$$.update=()=>{e.$$.dirty&1&&(r===0||r===1||r===2||r===3)&&i(r)},[r,s]}class Ue extends Q{constructor(t){super(),J(this,t,Ve,He,V,{})}}new Ue({target:document.getElementById("app")});
